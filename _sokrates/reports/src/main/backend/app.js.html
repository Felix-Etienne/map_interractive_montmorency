<html>
<head>
    <title>backend/app.js</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">backend/app.js (<b>27</b> lines of code) (<a href="app.js">raw</a>):</h3>
<div id="editor">import express from &quot;express&quot;;
import dotenv from &quot;dotenv&quot;;
import pool from &quot;./util/database.js&quot;;
import errorHandler from &quot;./middlewares/error-handler.js&quot;;
import  connectDB  from &quot;./util/database.js&quot;;

import classRoutes from &quot;./routes/class-routes.js&quot;
import studentRoutes from &quot;./routes/student-routes.js&quot;;

import { createClient } from &quot;@supabase/supabase-js&quot;;

dotenv.config();

// const db = await createClient(process.env.DB_URL,process.env.DB_KEY);
connectDB();
  // console.log(db);
const app = express();

const port = process.env.PORT || 5000;

app.use(express.json());

//Perms
app.use((req, res, next) =&gt; {
  res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);
  res.setHeader(
    &quot;Access-Control-Allow-Headers&quot;,
    &quot;Origin, X-Requested-With, Content-Type, Accept, Authorization&quot;
  );
  res.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, PATCH, DELETE&quot;);
  next();
});



// const get = async ({req,res}) =&gt; {
//   const query = &quot;SELECT * FROM classes&quot;;

//   const result = await db.query(query);
//   res.status(200).json(result);
// }
// //Routes
app.use(&quot;/api/class&quot;, classRoutes);
app.use(&quot;/api/students&quot;,studentRoutes);

// app.get(&quot;/hello&quot;, async( req, res, next) =&gt; {
//   const query = &quot;SELECT * FROM classes&quot;;

//   const result = await db.query(query);
//   res.status(200).json(result.rows);
// })

// //Error handler
// app.use(errorHandler);

//Run le serveur
app.listen(port, () =&gt; {
  console.log(`serveur &eacute;coute au: http://localhost:${port}`);
});</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/javascript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
